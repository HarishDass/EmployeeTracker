<div class="main">
  <h3 id="heading">Add Employee Details</h3>
  <div class="emp-form">
    <form [formGroup]="myForm">
      <div id="photoBox" class="field">
        <label for="empPhoto" id="photoLabel"
          >Employee Photo<span class="star">*</span></label
        >
        <input
          type="file"
          hidden
          name="photo"
          #profileUpload
          (change)="onFileSelect($event)"
        />
        <img
          [src]="url"
          id="empPhoto"
          width="150"
          height="150"
          (click)="profileUpload.click()"
        />
        <div
          *ngIf="submitted && form['photo'].errors"
          class="p-error block"
          id="photoError"
        >
          <div *ngIf="form['photo'].errors['required']">
            Employee Photo is required
          </div>
        </div>
      </div>
      <br />

      <div class="field">
        <label for="EmployeeNo" class="block"
          >Employee Number <span class="star">*</span></label
        >
        <input
          type="text"
          pInputText
          formControlName="EmployeeNo"
          placeholder="Enter Employee Number"
          class="inputField"
        />
        <div
          *ngIf="submitted && form['EmployeeNo'].errors"
          class="p-error block"
        >
          <div *ngIf="form['EmployeeNo'].errors['required']">
            Employee Number is required
          </div>
        </div>
      </div>
      <div class="field">
        <label for="name" class="block"
          >Employee Name <span class="star">*</span></label
        >
        <input
          type="text"
          pInputText
          placeholder="Enter Employee Name"
          formControlName="employeeName"
          class="inputField"
        />
        <div
          *ngIf="submitted && form['employeeName'].errors"
          class="p-error block"
        >
          <div *ngIf="form['employeeName'].errors['required']">
            Employee Name is required
          </div>
          <div *ngIf="form['employeeName'].errors['pattern']">
            Employee Name is not valid
          </div>
        </div>
      </div>

      <div class="field">
        <label for="mobile" class="block"
          >Mobile Number <span class="star">*</span></label
        >
        <p-inputMask
          mask="9999999999"
          formControlName="mobileNo"
          placeholder="Enter Mobile Number"
          styleClass="inputField"
        ></p-inputMask>
        <div *ngIf="submitted && form['mobileNo'].errors" class="p-error block">
          <div *ngIf="form['mobileNo'].errors['required']">
            Mobile Number is required
          </div>
        </div>
      </div>
      <div class="field">
        <label for="emergencyContactNumber" class="block"
          >Emergency Contact <span class="star">*</span></label
        >
        <p-inputMask
          mask="9999999999"
          formControlName="emergencyContactNumber"
          placeholder="Enter Emergency Contact Number"
          styleClass="inputField"
        ></p-inputMask>
        <div
          *ngIf="submitted && form['emergencyContactNumber'].errors"
          class="p-error block"
        >
          <div *ngIf="form['emergencyContactNumber'].errors['required']">
            Emergency Contact is required
          </div>
        </div>
      </div>
      <div class="field">
        <label for="mail" class="block"
          >Email ID <span class="star">*</span></label
        >
        <input
          type="email"
          pInputText
          formControlName="email"
          placeholder="Enter Mail ID"
          class="inputField"
        />
        <div *ngIf="submitted && form['email'].errors" class="p-error block">
          <div *ngIf="form['email'].errors['pattern']">Email is not valid</div>
          <div *ngIf="form['email'].errors['required']">Email is required</div>
        </div>
      </div>
      <div class="field">
        <label for="dateOfJoining" class="block"
          >Date of Joining <span class="star">*</span></label
        >
        <p-calendar
          formControlName="dateOfJoining"
          [showIcon]="true"
          dateFormat="dd-mm-yy"
          placeholder="DD-MM-YYYY"
          styleClass="inputField"
        ></p-calendar>
        <div
          *ngIf="submitted && form['dateOfJoining'].errors"
          class="p-error block"
        >
          <div *ngIf="form['dateOfJoining'].errors['required']">
            Date of Joining is required
          </div>
        </div>
      </div>
      <div class="field">
        <label for="department" class="block"
          >Department <span class="star">*</span></label
        >
        <p-dropdown
          formControlName="department"
          [options]="departments"
          (onChange)="departmentValue($event)"
          optionLabel="department"
          styleClass="inputField"
          placeholder="Select Department"
        ></p-dropdown>
        <div
          *ngIf="submitted && form['department'].errors"
          class="p-error block"
        >
          <div *ngIf="form['department'].errors['required']">
            Department is required
          </div>
        </div>
      </div>

      <div class="field">
        <label for="isActive" class="block"
          >Active Status <span class="star">*</span></label
        >
        <div class="inputRadio">
          <div class="radioBtn">
            <p-radioButton
              value = true
              formControlName="active"
            ></p-radioButton>
            <span class="radioLabel">Active</span>
          </div>
          <div class="radioBtn">
            <p-radioButton
              value = false
              formControlName="active"
              [disabled]="true"
            ></p-radioButton>
            <span class="radioLabel">inActive</span>
          </div>
          <div *ngIf="submitted && form['active'].errors" class="p-error block">
            <div *ngIf="form['active'].errors['required']">
              Active Status is required
            </div>
          </div>
        </div>
      </div>

      <div class="field">
        <label for="gender" class="block"
          >Gender <span class="star">*</span></label
        >
        <div class="inputRadio">
          <div class="radioBtn">
            <p-radioButton
              value="male"
              formControlName="gender"
            ></p-radioButton>
            <span class="radioLabel">Male</span>
          </div>
          <div class="radioBtn">
            <p-radioButton
              value="female"
              formControlName="gender"
            ></p-radioButton>
            <span class="radioLabel">Female</span>
          </div>
          <div class="radioBtn">
            <p-radioButton
              value="others"
              formControlName="gender"
            ></p-radioButton>
            <span class="radioLabel">Others</span>
          </div>
          <div *ngIf="submitted && form['gender'].errors" class="p-error block">
            <div *ngIf="form['gender'].errors['required']">
              Gender is required
            </div>
          </div>
        </div>
      </div>

      <div class="field">
        <label for="dob" class="block"
          >Date of Birth <span class="star">*</span></label
        >
        <p-calendar
          formControlName="dateOfBirth"
          [showIcon]="true"
          dateFormat="dd-mm-yy"
          placeholder="DD-MM-YYYY"
          [showTime]="false"
          id="dob"
          styleClass="inputField"
        ></p-calendar>
        <div
          *ngIf="submitted && form['dateOfBirth'].errors"
          class="p-error block"
        >
          <div *ngIf="form['dateOfBirth'].errors['required']">
            Data of Birth is required
          </div>
        </div>
      </div>

      <div class="field">
        <label for="nationality" class="block"
          >Nationality <span class="star">*</span></label
        >
        <div class="inputRadio">
          <div class="radioBtn">
            <p-radioButton
              value="indian"
              formControlName="nationality"
            ></p-radioButton>
            <span class="radioLabel">Indian</span>
          </div>
          <div class="radioBtn">
            <p-radioButton
              value="others"
              formControlName="nationality"
            ></p-radioButton>
            <span class="radioLabel">Others</span>
          </div>
          <div
            *ngIf="submitted && form['nationality'].errors"
            class="p-error block"
          >
            <div *ngIf="form['nationality'].errors['required']">
              Nationality is required
            </div>
          </div>
        </div>
      </div>

      <div formGroupName="address">
        <div class="field">
          <label for="address_line1" class="block"
            >Address Line 1 <span class="star">*</span></label
          >
          <input
            pInputText
            formControlName="address_line1"
            placeholder="Enter Address Line 1"
            class="inputField"
          />
          <div
            *ngIf="submitted && subAddress['address_line1'].errors"
            class="p-error block"
          >
            <div *ngIf="subAddress['address_line1'].errors['required']">
              Address Line 1 is required
            </div>
          </div>
        </div>

        <div class="field">
          <label for="address_line2" class="block">Address Line 2</label>
          <input
            pInputText
            formControlName="address_line2"
            placeholder="Enter Address Line 2"
            class="inputField"
          />
        </div>

        <div class="field">
          <label for="city" class="block"
            >City <span class="star">*</span></label
          >
          <input
            pInputText
            formControlName="city"
            placeholder="Enter City"
            class="inputField"
          />
          <div
            *ngIf="submitted && subAddress['city'].errors"
            class="p-error block"
          >
            <div *ngIf="subAddress['city'].errors['required']">
              City is required
            </div>
          </div>
        </div>

        <div class="field">
          <label for="state" class="block"
            >State <span class="star">*</span></label
          >
          <input
            pInputText
            formControlName="state"
            placeholder="Enter State"
            class="inputField"
          />
          <div
            *ngIf="submitted && subAddress['state'].errors"
            class="p-error block"
          >
            <div *ngIf="subAddress['state'].errors['required']">
              State is required
            </div>
          </div>
        </div>

        <div class="field">
          <label for="pincode" class="block"
            >Pincode <span class="star">*</span></label
          >
          <p-inputMask
            mask="999999"
            formControlName="pincode"
            placeholder="Enter Pincode"
            styleClass="inputField"
          ></p-inputMask>
          <div
            *ngIf="submitted && subAddress['pincode'].errors"
            class="p-error block"
          >
            <div *ngIf="subAddress['pincode'].errors['required']">
              Pincode is required
            </div>
          </div>
        </div>
      </div>
      <div class="field">
        <label for="fathername" class="block"
          >Father Name <span class="star">*</span></label
        >
        <input
          type="text"
          pInputText
          placeholder="Enter Father Name"
          formControlName="fatherName"
          class="inputField"
        />
        <div
          *ngIf="submitted && form['fatherName'].errors"
          class="p-error block"
        >
          <div *ngIf="form['fatherName'].errors['required']">
            Father Name is required
          </div>
          <div *ngIf="form['fatherName'].errors['pattern']">
            Father Name is not valid
          </div>
        </div>
      </div>

      <div class="field">
        <label for="qualification" class="block"
          >Qualification <span class="star">*</span></label
        >
        <input
          pInputText
          formControlName="qualification"
          placeholder="Enter Qualification"
          class="inputField"
        />
        <div
          *ngIf="submitted && form['qualification'].errors"
          class="p-error block"
        >
          <div *ngIf="form['qualification'].errors['required']">
            Qualification is required
          </div>
        </div>
      </div>
      <div class="field">
        <label for="ctc" class="block">CTC <span class="star">*</span></label>
        <input
          type="number"
          pInputText
          formControlName="CTC"
          placeholder="Enter CTC"
          class="inputField"
        />
        <div *ngIf="submitted && form['CTC'].errors" class="p-error block">
          <div *ngIf="form['CTC'].errors['required']">CTC is required</div>
        </div>
      </div>
      <div class="field">
        <label for="years" class="block"
          >Year of Experience <span class="star">*</span></label
        >
        <input
          type="number"
          pInputText
          formControlName="totalYears"
          placeholder="Enter Year of Experience"
          class="inputField"
        />
        <div
          *ngIf="submitted && form['totalYears'].errors"
          class="p-error block"
        >
          <div *ngIf="form['totalYears'].errors['required']">
            Year of Experience is required
          </div>
        </div>
      </div>
      <div class="field">
        <label for="experience" class="block"
          >Experience / Fresher <span class="star">*</span></label
        >
        <div class="inputRadio">
          <div class="radioBtn">
            <p-radioButton
              value="experience"
              formControlName="experience"
              inputId="experience"
              (change)="experienceRequired($event.target)"
            ></p-radioButton>
            <span class="radioLabel">Experience</span>
          </div>
          <div class="radioBtn">
            <p-radioButton
              value="fresher"
              formControlName="experience"
              inputId="fresher"
            ></p-radioButton>
            <span class="radioLabel">Fresher</span>
          </div>
          <div
            *ngIf="submitted && form['experience'].errors"
            class="p-error block"
          >
            <div *ngIf="form['experience'].errors['required']">
              Experience is required
            </div>
          </div>
        </div>
      </div>
      <div formArrayName="yearOfExperience">
        <div *ngIf="myForm.value.experience == 'experience'">
          <div class="mainbtn">
            <div class="sbtn">
              <p-button label="Add" (click)="addExperience()"></p-button>
            </div>
          </div>
          <div
            class="field1"
            *ngFor="let experience of yearOfExperience.controls; let i = index"
            formGroupName="{{ i }}"
          >
            <div class="field">
              <label for="years" class="block"
                >Year of Experience <span class="star">*</span></label
              >
              <input
                type="text"
                pInputText
                formControlName="years"
                placeholder="Enter Year of Experience"
                class="inputField"
              />
            </div>
            <div class="field">
              <label for="companyName" class="block"
                >Company Name <span class="star">*</span></label
              >
              <input
                type="text"
                pInputText
                placeholder="Enter Company Name"
                formControlName="companyName"
                class="inputField"
              />
            </div>
            <div class="field">
              <label for="joinDate" class="block"
                >Date of Join <span class="star">*</span></label
              >
              <p-calendar
                formControlName="joinDate"
                [showIcon]="true"
                dateFormat="dd-mm-yy"
                placeholder="DD-MM-YYYY"
                styleClass="inputField"
              ></p-calendar>
            </div>
            <div class="field">
              <label for="endDate" class="block"
                >Date of End <span class="star">*</span></label
              >
              <p-calendar
                formControlName="endDate"
                [showIcon]="true"
                dateFormat="dd-mm-yy"
                placeholder="DD-MM-YYYY"
                styleClass="inputField"
              ></p-calendar>
              <div class="sbtn">
                <p-button label="Delete" (click)="delExperience(i)"></p-button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="field">
        <label for="panNumber" class="block"
          >PAN Number <span class="star">*</span></label
        >
        <input
          pInputText
          placeholder="Enter PAN Number"
          formControlName="panNumber"
          class="inputField"
        />
        <div
          *ngIf="submitted && form['panNumber'].errors"
          class="p-error block"
        >
          <div *ngIf="form['panNumber'].errors['required']">
            Pan Number is required
          </div>
          <div *ngIf="form['panNumber'].errors['pattern']">
            Pan Number not valid
          </div>
        </div>
      </div>
      <div class="mainbtn">
        <div class="sbtn">
          <button
            pButton
            pRipple
            *ngIf="!isUpdateActive"
            (ngSubmit)="onSubmit()"
            label="Submit"
            type="submit"
            class="p-button-success"
          ></button>
          <button
            pButton
            *ngIf="isUpdateActive"
            pRipple
            (click)="update()"
            label="Update"
            type="submit"
            class="p-button-success"
          ></button>
        </div>
        <div class="sbtn">
        <p-button
            label="Reset"
            (click)="onReset()"
            styleClass="p-button-secondary"
        ></p-button>
        </div>
      </div>
    </form>
  </div>
</div>
